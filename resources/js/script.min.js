/**
 * Icon Captcha Plugin: v2.0.2
 * Copyright © 2017, Fabian Wennink (https://www.fabianwennink.nl)
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
!function(a){a.fn.extend({iconCaptcha:function(c){var t={captchaTheme:"",captchaFontFamily:"",captchaClickDelay:1e3,captchaHoverDetection:!0,showBoxShadow:!0,showCredits:!0,enableLoadingAnimation:!1,loadingAnimationDelay:2e3,captchaAjaxFile:"../php/captcha-request.php",captchaMessages:{header:"Select the image that does not belong in the row",correct:{top:"Great!",bottom:"You do not appear to be a robot."},incorrect:{top:"Oops!",bottom:"You've selected the wrong image."}}},e=a.extend(t,c);return this.each(function(c){function t(){var t="light";!e.captchaTheme||"dark"!==e.captchaTheme&&"light"!==e.captchaTheme||(d.addClass("captcha-theme-"+e.captchaTheme),t=e.captchaTheme.toLowerCase()),a.ajax({url:e.captchaAjaxFile,type:"post",data:{cID:c,rT:1,tM:t},success:function(t){t&&($data=JSON.parse(t),p=new Date,i(),d.trigger("init"),d.find(".captcha-image").each(function(t,i){a(this).css("background-image","url("+e.captchaAjaxFile+"?cid="+c+"&hash="+$data[t]+")"),a(this).attr("icon-hash",$data[t])}))},error:function(a,c,t){console.log(c,t),n()}})}function i(){e.captchaFontFamily?d.css("font-family",e.captchaFontFamily):a("body").append('\x3c!-- Icon Captcha default font --\x3e<link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">'),d.html("                        <div class='captcha-modal'>                            <div class='captcha-modal__header'>                                <span>"+(e.captchaMessages.header&&e.captchaMessages.header?e.captchaMessages.header:"Select the image that does not belong in the row")+"</span>                            </div>                            <div class='captcha-modal__icons'>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                            </div>                            <div class='captcha-modal__credits' alt='Captcha provided by Fabian Wennink'>                                Captcha provided by <a href='https://www.fabianwennink.nl/projects/IconCaptcha/v2/' target='_blank' rel='follow'>Fabian Wennink</a> ©                            </div>                            <input type='hidden' name='captcha-hf' required />                            <input type='hidden' name='captcha-idhf' value='"+c+"' required />                        </div>"),e.showBoxShadow&&d.addClass("captcha-boxshadow"),e.showCredits&&d.addClass("captcha-credits")}function s(t){var i=t.attr("icon-hash");i&&(d.find('input[name="captcha-hf"]').attr("value",i),d.find('input[name="captcha-idhf"]').attr("value",c),a.ajax({url:e.captchaAjaxFile,type:"post",data:{cID:c,pC:i,rT:2},success:function(a){"1"===a?o():n()},error:function(a,c,t){n()}}))}function o(){d.find(".captcha-modal__icons").empty(),d.addClass("captcha-success"),d.find(".captcha-modal__icons").html('<div class="captcha-modal__icons-title">'+(e.captchaMessages.correct&&e.captchaMessages.correct.top?e.captchaMessages.correct.top:"Great!")+'</div><div class="captcha-modal__icons-subtitle">'+(e.captchaMessages.correct&&e.captchaMessages.correct.bottom?e.captchaMessages.correct.bottom:"You do not appear to be a robot.")+"</div>"),d.trigger("success")}function n(){d.find(".captcha-modal__icons").empty(),d.addClass("captcha-error"),d.find(".captcha-modal__icons").html('<div class="captcha-modal__icons-title">'+(e.captchaMessages.incorrect&&e.captchaMessages.incorrect.top?e.captchaMessages.incorrect.top:"Oops!")+'</div><div class="captcha-modal__icons-subtitle">'+(e.captchaMessages.incorrect&&e.captchaMessages.incorrect.bottom?e.captchaMessages.incorrect.bottom:"You've selected the wrong image.")+"</div>"),d.trigger("error"),setTimeout(h,3e3)}function h(){d.removeClass("captcha-error"),d.find("input").attr("value",null),d.find(".captcha-modal__icons").html("                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                    ").removeClass("captcha-opacity"),d.find(".captcha-modal__icons > .captcha-image").attr("icon-hash",null),t(),d.trigger("refreshed")}var d=a(this),p=0,r=!1;t(),d.on("click",".captcha-modal__icons > .captcha-image",function(){if(!(new Date-p<=e.captchaClickDelay)&&(!e.captchaHoverDetection||r)){var c=a(this),t=d.find(".captcha-modal__icons");t.hasClass("captcha-opacity")||(d.trigger("selected"),!0===e.enableLoadingAnimation?(t.addClass("captcha-opacity"),t.prepend('<div class="captcha-loader"></div>'),setTimeout(function(){s(c)},e.loadingAnimationDelay)):s(c))}}).on({mouseenter:function(){r||(r=!0)},mouseleave:function(){r&&(r=!1)}},d)})}})}(jQuery);
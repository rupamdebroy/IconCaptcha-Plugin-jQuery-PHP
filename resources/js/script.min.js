/**
 * Icon Captcha Plugin: v2.1.0
 * Copyright © 2017, Fabian Wennink (https://www.fabianwennink.nl)
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
!function(a){a.fn.extend({iconCaptcha:function(c){var t={captchaTheme:[""],captchaFontFamily:"",captchaClickDelay:1e3,captchaHoverDetection:!0,showBoxShadow:!0,showCredits:!0,enableLoadingAnimation:!1,loadingAnimationDelay:2e3,requestIconsDelay:1500,captchaAjaxFile:"../php/captcha-request.php",captchaMessages:{header:"Select the image that does not belong in the row",correct:{top:"Great!",bottom:"You do not appear to be a robot."},incorrect:{top:"Oops!",bottom:"You've selected the wrong image."}}},e=a.extend(t,c);return this.each(function(c){function t(){var a="light";if(void 0==e.captchaTheme[c]||"dark"!==e.captchaTheme[c]&&"light"!==e.captchaTheme[c]||(a=e.captchaTheme[c].toLowerCase()),p.addClass("captcha-theme-"+a),i(),e.requestIconsDelay&&e.requestIconsDelay>0){var t=p.find(".captcha-modal__icons");t.addClass("captcha-opacity"),t.prepend('<div class="captcha-loader"></div>'),setTimeout(function(){s(c,a),t.removeClass("captcha-opacity"),t.find(".captcha-loader").remove()},e.requestIconsDelay)}else s(c,a)}function s(c,t){a.ajax({url:e.captchaAjaxFile,type:"post",data:{cID:c,rT:1,tM:t},success:function(t){t&&($data=JSON.parse(t),r=new Date,p.find(".captcha-image").each(function(t,s){a(this).css("background-image","url("+e.captchaAjaxFile+"?cid="+c+"&hash="+$data[t]+")"),a(this).attr("icon-hash",$data[t])}),p.trigger("init"))},error:function(a,c,t){console.log(c,t),h()}})}function i(){e.captchaFontFamily?p.css("font-family",e.captchaFontFamily):a("body").append('\x3c!-- Icon Captcha default font --\x3e<link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">'),p.html("                        <div class='captcha-modal'>                            <div class='captcha-modal__header'>                                <span>"+(e.captchaMessages.header&&e.captchaMessages.header?e.captchaMessages.header:"Select the image that does not belong in the row")+"</span>                            </div>                            <div class='captcha-modal__icons'>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                            </div>                            <div class='captcha-modal__credits' alt='Captcha provided by Fabian Wennink'>                                Captcha provided by <a href='https://www.fabianwennink.nl/projects/IconCaptcha/v2/' target='_blank' rel='follow'>Fabian Wennink</a> ©                            </div>                            <input type='hidden' name='captcha-hf' required />                            <input type='hidden' name='captcha-idhf' value='"+c+"' required />                        </div>"),e.showBoxShadow&&p.addClass("captcha-boxshadow"),e.showCredits&&p.addClass("captcha-credits")}function o(t){var s=t.attr("icon-hash");s&&(p.find('input[name="captcha-hf"]').attr("value",s),p.find('input[name="captcha-idhf"]').attr("value",c),a.ajax({url:e.captchaAjaxFile,type:"post",data:{cID:c,pC:s,rT:2},success:function(a){"1"===a?n():h()},error:function(a,c,t){h()}}))}function n(){p.find(".captcha-modal__icons").empty(),p.addClass("captcha-success"),p.find(".captcha-modal__icons").html('<div class="captcha-modal__icons-title">'+(e.captchaMessages.correct&&e.captchaMessages.correct.top?e.captchaMessages.correct.top:"Great!")+'</div><div class="captcha-modal__icons-subtitle">'+(e.captchaMessages.correct&&e.captchaMessages.correct.bottom?e.captchaMessages.correct.bottom:"You do not appear to be a robot.")+"</div>"),p.trigger("success")}function h(){p.find(".captcha-modal__icons").empty(),p.addClass("captcha-error"),p.find(".captcha-modal__icons").html('<div class="captcha-modal__icons-title">'+(e.captchaMessages.incorrect&&e.captchaMessages.incorrect.top?e.captchaMessages.incorrect.top:"Oops!")+'</div><div class="captcha-modal__icons-subtitle">'+(e.captchaMessages.incorrect&&e.captchaMessages.incorrect.bottom?e.captchaMessages.incorrect.bottom:"You've selected the wrong image.")+"</div>"),p.trigger("error"),setTimeout(d,3e3)}function d(){p.removeClass("captcha-error"),p.find("input").attr("value",null),p.find(".captcha-modal__icons").html("                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                    ").removeClass("captcha-opacity"),p.find(".captcha-modal__icons > .captcha-image").attr("icon-hash",null),t(),p.trigger("refreshed")}var p=a(this),r=0,l=!1;t(),p.on("click",".captcha-modal__icons > .captcha-image",function(){if(!(new Date-r<=e.captchaClickDelay)&&(!e.captchaHoverDetection||l)){var c=a(this),t=p.find(".captcha-modal__icons");t.hasClass("captcha-opacity")||(p.trigger("selected"),!0===e.enableLoadingAnimation?(t.addClass("captcha-opacity"),t.prepend('<div class="captcha-loader"></div>'),setTimeout(function(){o(c)},e.loadingAnimationDelay)):o(c))}}).on({mouseenter:function(){l||(l=!0)},mouseleave:function(){l&&(l=!1)}},p)})}})}(jQuery);